<% include ../layouts/navigation-bar %>

<main class="container general-container">
    <div class="row h-100">
        <div class="col-12 my-auto">
            <div id="explorer-search" class="row">
                <div class="col-12">
                    <div class="custom-input">
                        <div class="input-group">
                            <input id="explorer-input" type="text" class="search-query form-control" placeholder="Search by Address/Txhash/Block" />
                            <span class="input-group-btn">
                                <button class="button-search" type="button">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-lg-5">
                    <div class="explorer-index card">
                        <div class="card-header">
                            Airmed Foundation Blockchain Explorer                                
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-6">
                                    <p class="explorer-p">Latest Block</p>
                                    <p><span class="explorer-info-text">7210982</span> <small>(20.2s)</small></p>
                                </div>
                                <div class="col-6">
                                    <p class="explorer-p text-right">Transactions</p>
                                    <p class="text-right"><span class="explorer-info-text">390.38 M</span> <small>(5.5 TPS)</small></p>
                                </div>
                                <div class="col-6">
                                    <p class="explorer-p">Difficulty</p>
                                    <p><span class="explorer-info-text">2,811.81 TH</span></p>
                                </div>
                                <div class="col-6">
                                    <p class="explorer-p text-right">Hash Rate</p>
                                    <p class="text-right"><span class="explorer-info-text">146,759.16 GH/s</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-6 offset-0 offset-lg-1">
                    <div class="explorer-index card">
                        <div class="card-header">
                            Transaction History
                        </div>
                        <div class="card-body">
                            <div class="canvas-wrapper">
                                <canvas class="main-chart" id="tx-chart" height="200" width="600"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-12 col-lg-5">
                    <div class="explorer-index card">
                        <div class="card-header">
                            <span class="custom-card-title"><i class="fas fa-cubes" aria-hidden="true"></i> Blocks</span>
                        </div>
                        <div id="block-list" class="explorer-list">
                            <ul class="list-group list-group-flush d-flex">
                                <% blocksInfo.forEach(function(block)  { %>
                                    <li class="list-group-item align-items-center">
                                        <div class="row h-100">
                                            <div class="col-3 my-auto text-center block">
                                                <p class="explorer-p"><a href="explorer/block/<%= block.id - 1 %>">Block <%= block.id - 1 %></a></p>
                                            </div>
                                            <div class="col-9 my-auto block-info">
                                                <p class="p-word-break">Hash <a href="explorer/block/<%= block.id - 1 %>"><%= block.hash.substr(0, 22) + '…' %></a></p>
                                                <p class="explorer-p">
                                                    <a class="tx-btn" href="explorer/<%= (block.id - 1) %>/transactions">
                                                        <%= block.transactions.length %> transactions
                                                    </a> 
                                                    in this block
                                                </p>
                                            </div>
                                        </div>
                                    </li>
                                <% }); %> 
                            </ul>
                        </div>
                        <div class="card-footer">
                            <a href="/explorer/blocks" class="btn btn-primary btn-sm btn-block">View all Blocks</a>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-lg-6 offset-0 offset-lg-1">
                    <div class="explorer-index card">
                        <div class="card-header">
                            <span class="custom-card-title"><i class="fa fa-list-alt" aria-hidden="true"></i> Transactions</span>
                        </div>
                        <div id="transactions-list" class="explorer-list">
                            <ul class="list-group list-group-flush d-flex">
                                <% transactions.forEach(function(transaction)  { %>
                                    <li class="list-group-item align-items-center">
                                        <div class="row h-100">
                                            <div class="col-2 my-auto tx-icon">
                                                <i class="fas fa-hdd" aria-hidden="true"></i>
                                            </div>
                                            <div class="col-10 my-auto">
                                                <p class="explorer-p">TX# <a href="/explorer/transaction/<%= transaction.id %>"><%= transaction.id.substr(0, 28) + '…' %></a></p>
                                                <% if(transaction.imputsArgs.args.length > 0 && transaction.imputsArgs.args[0] == 'sendHash') { %>
                                                    <p class="explorer-p">From <a href="explorer/address/<%= transaction.imputsArgs.args[1] %>"><%= transaction.imputsArgs.args[1].substr(0, 22) + '…' %></a> To <a href="explorer/address/<%= transaction.imputsArgs.args[2] %>"><%= transaction.imputsArgs.args[2].substr(0, 22) + '…' %></a></p>
                                                    <p class="explorer-p">Message <span><%= transaction.imputsArgs.args[3].substr(0, 22) + '…' %></span></p>
                                                <% }else{ %>
                                                    <p class="explorer-p">From <span class="font-weight-bold">N/A</span> To <span class="font-weight-bold">N/A</span></p>
                                                    <p class="explorer-p">Message <span class="font-weight-bold">N/A</span></p>
                                                <% } %>
                                            </div>
                                        </div>
                                    </li>
                                <% }); %> 
                            </ul>
                        </div>
                        <div class="card-footer">
                            <a href="/explorer/transactions" class="btn btn-primary btn-sm btn-block">View all Transactions</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<% include ../layouts/footer %>